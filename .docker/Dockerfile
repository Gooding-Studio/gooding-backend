FROM openjdk:17-oracle
ARG JAR_FILE=build/libs/gooding-1.0.0.0.jar
ENV MY_SERVER=${MY_SERVER} \
ACTIVE_PROFILE=${ACTIVE_PROFILE} \
SPRING_DATASOURCE_URL=${SPRING_DATASOURCE_URL} \
SPRING_DATASOURCE_USERNAME=${SPRING_DATASOURCE_USERNAME} \
SPRING_DATASOURCE_PASSWORD=${SPRING_DATASOURCE_PASSWORD} \
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID} \
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET} \
GOOGLE_REDIRECT_URI=${GOOGLE_REDIRECT_URI} \
JWT_SECRET_KEY=${JWT_SECRET_KEY} \
REDIS_SENTINEL_MASTER=${REDIS_SENTINEL_MASTER} \
REDIS_SENTINEL_NODE0=${REDIS_SENTINEL_NODE0} \
REDIS_SENTINEL_NODE1=${REDIS_SENTINEL_NODE1} \
REDIS_SENTINEL_NODE2=${REDIS_SENTINEL_NODE2}
COPY ${JAR_FILE} app.jar
ENTRYPOINT ["java", "-Dspring.profiles.active=${ACTIVE_PROFILE}", "-jar", "/app.jar"]